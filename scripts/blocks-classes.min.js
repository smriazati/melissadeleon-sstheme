!function(){var u=null;function i(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function f(e,t){return e.filter(function(e){return t.indexOf(e)<0})}function r(e){for(var t=h.length-1;0<=t;t--)if(h[t].name===e)return h[t].className;return i(e)}function t(w){return!(!window.Y||!window.Y.Promise)&&new Y.Promise(function(p){h=[],Y.Data.get({url:"/api/template/GetTemplateCustomCss",success:function(e){var t,s,a,n,o=e.css;if(o){var i=o.replace(/\r?\n|\r/g,"").split("/*===CUSTOMCLASSES===*/");if(i&&1<i.length){for(var l,r=(t=i[1],a=document.implementation.createHTMLDocument(""),(n=document.createElement("style")).textContent=t,window.top.classesInTop||((s=document.createElement("style")).textContent=t,window.top.document.body.appendChild(s),window.top.classesInTop=!0),a.body.appendChild(n),n.sheet.cssRules),d=[],c=r.length-1;0<=c;c--){var u=r[c].selectorText&&r[c].selectorText.replace(/\./g,""),g={className:u,name:u};-1<r[c].cssText.indexOf("--name")&&(g.name=r[c].cssText.split("--name:")[1].split(";")[0].trim().replace(/(^")|("$)/g,"").replace(/(^')|('$)/g,"")),d.push(g.name),h.push(g)}if(w&&(l=w.get("dialog").anchorEl),l){var m=f(l.getAttribute("data-classes")?b(l.getAttribute("data-classes").split(",")):[],d);if(m&&m.length)for(c=m.length-1;0<=c;c--)h.push({className:m[c],name:m[c]})}C&&console.log(h),p(h)}else C&&console.log("Something not good"),p([])}},failure:function(e){C&&console.log("Get Custom CSS Data Failed"),new Y.Squarespace.Widgets.Information({"strings.title":"Error","strings.message":e.error}),p([])}})})}function o(e,t){if(e&&!e.querySelector(".addClass-button")){var s,a,n=null,o=null,i=!0;if(t){i=!1;var l=function(e){for(var t in e)if(t.startsWith("__reactInternalInstance$"))try{if(e[t]._currentElement)return e[t]._currentElement._owner._instance;if(e[t].memoizedProps)return e[t].memoizedProps.children._owner&&e[t].memoizedProps.children._owner.stateNode?e[t].memoizedProps.children._owner.stateNode:e[t].return&&e[t].return.memoizedProps?e[t].return.memoizedProps:e[t].memoizedProps.children[0]._owner.stateNode}catch(e){console.log(e)}return null}(t.parentNode);if(l.overlayEditors&&(u=l),!(n=t.querySelector(".sqs-frontend-overlay-editor-widget-label")?t.querySelector(".sqs-frontend-overlay-editor-widget-label").textContent:null))return;d=n,c=null,u&&u.overlayEditors&&u.overlayEditors.length&&u.overlayEditors.forEach(function(e){e.label===d&&e.referenceNode&&(c=e.referenceNode)}),o=(o=c).id&&-1===o.id.indexOf("yui_3_17_2_1")?o:null}n&&o&&t&&(i=!0),i&&(s=document.createElement("div"),o&&(s.refBlock=o),a="",r=!1,window.Static.SQUARESPACE_CONTEXT.templateVersion&&(r="7.1"==window.Static.SQUARESPACE_CONTEXT.templateVersion),r&&(a="line-height:36px;color:#000!important;padding:0 10px"),s.style.width="auto",s.className="sqs-dialog-field sqs-button-vanilla normal-button data-state-loaded Class-button-wrapper",s.title="Class",s.innerHTML='<div class="sqs-button-vanilla-content addClass-button active" data-action="addClass" data-not-block="'+e.className.indexOf("sqs-frontend-overlay-editor-widget-buttons-wrapper")+'"><div class="label" style="'+a+'" data-not-block="'+e.className.indexOf("sqs-frontend-overlay-editor-widget-buttons-wrapper")+'" data-action="addClass">Classes</div></div>',e.appendChild(s))}var r,d,c}function s(n){var e=n.document.body;n.blocksObserver&&n.blocksObserver.disconnect(),n.blocksObserver=new MutationObserver(function(e){e.forEach(function(e){var t;if("childList"==e.type&&e.addedNodes[0]){if(e.addedNodes[0].className&&e.addedNodes[0].className.length)if(-1<e.addedNodes[0].className.indexOf("sqs-block-editable")){(t=e.addedNodes[0].querySelector(".sqs-block-editor-button-container-content"))&&o(t)}else if(!(e.addedNodes[0].className&&-1<e.addedNodes[0].className.indexOf("sqs-frontend-overlay-editor-widget-visible"))&&e.addedNodes[0].className&&-1<e.addedNodes[0].className.indexOf("sqs-frontend-node-header-widget"))for(var s=n.document.querySelectorAll(".sqs-block-editor-button-container-content"),a=s.length-1;0<=a;a--)o(s[a])}else"attributes"==e.type&&"class"===e.attributeName&&(e.target.className&&e.target.className.indexOf&&-1<e.target.className.indexOf("sqs-editing")||e.target.className&&e.target.className.indexOf&&-1<e.target.className.indexOf("sqs-layout-rendering")?l(n):e.target.className&&e.target.className.indexOf&&-1<e.target.className.indexOf("sqs-frontend-overlay-editor-widget-visible")&&(t=e.target.querySelector(".sqs-frontend-overlay-editor-widget-buttons-wrapper"))&&o(t,e.target))})}),n.blocksObserver.observe(e,{childList:!0,subtree:!0,attributes:!0})}function b(e){for(var t=[],s=e.length-1;0<=s;s--){for(var a=i(e[s]),n=h.length-1;0<=n;n--)h[n].className===e[s]&&(a=h[n].name);t.push(a)}return t}function l(e){if((e=e||window).CustomBlocksClasses){for(var t in e.CustomBlocksClasses)if(e.CustomBlocksClasses.hasOwnProperty(t))for(var s="#"+t,a=e.document.querySelectorAll(s),n=a.length-1;0<=n;n--)!function(e,t){if(e){for(var s=t.length-1;0<=s;s--)t[s]&&e.classList.add(i(t[s]));e.setAttribute("data-classes",t),window.dispatchEvent(new CustomEvent("custom-classes-added",{detail:{el:e}}))}}(a[n],e.CustomBlocksClasses[t]);window.Y&&Y.fire("custom-classed-added"),function(e){try{var t=window.Static&&Static.SQUARESPACE_CONTEXT,s=!!e&&slugify(e);if(s&&window.___sqs_plugins_ga&&window.___sqs_plugins_ga[s])return;var a={pluginName:"Blocks Classes",pluginPage:t&&t.website.baseUrl?t.website.baseUrl+location.pathname:location.href,pageTitle:document.title,pluginData:e||"No plugin data",siteTitle:t&&t.website.siteTitle||"",siteUrl:t&&t.website.baseUrl||location.origin},n=new XMLHttpRequest;n.open("POST","https://tools.squarewebsites.org/api/sqs-plugins",!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(JSON.stringify(a)),s&&(window.___sqs_plugins_ga||(window.___sqs_plugins_ga={}),window.___sqs_plugins_ga[s]=!0)}catch(e){console.log(e)}}()}else{var o=e.top===e.self?"window":"Top window";console.log("No classes config found in "+o)}}function a(e){var t,s,a,o,i,n,l;e.target.dataset&&e.target.dataset.action&&"addClass"===e.target.dataset.action&&(e.preventDefault(),t=e.target,s=e.view,!(l=s.Y.one(t).ancestor(".sqs-block"))&&-1<t.dataset.notBlock&&(a=(a=function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}(t,"sqs-button-vanilla"))?a.refBlock:null,l=s.Y.one(a)),l&&(o=!1,s.top===s.self&&(o=s.Y.Squarespace.Damask.ContextGlobals.frameWindow()._node.Y.one("#"+l.getAttribute("id"))),l._node.getBoundingClientRect(),i=l.getAttribute("id"),n=l.getAttribute("data-classes")?b(l.getAttribute("data-classes").split(",")):[],d&&(d.close(),d=null),(d=new c({width:400,height:200,name:"classname-set",title:"Set Block Classes",savingText:"Setting Classes...",emptyText:"No classes added.",style:"standard",closeOthers:!1,position:"top",blurring:!0,overlay:!1,draggable:!0,flyoutPointerDirection:"right",fields:[{ctor:g,config:{mode:"select",requestUrl:"getClasses",addMemberUrl:"addClass",allowOnlyExistingMembers:!1,name:"classname",blurring:!0,title:"Block Classes",addMemberText:"Add Class",editorLabel:"Add Block Classes",maxMemberChars:250,canAddMembers:!0,emptyText:"No classes added.",addText:"Add comma separated classes",memberClass:"category",inputPlaceholder:"Add Block Classes",description:"Add your classes to this block",data:n,existingMembers:[],className:"block-classes-stringset"}}],buttons:[{title:"Close",type:"cancel"},{title:"OK",type:"saveAndClose"}]})).onceAfter("rendered",function(){var t=d.getField("classname");d&&d.mainEl&&d.mainEl.on("click",function(e){t.closeFlyout()}),t.on("dataChange",function(e){for(var t,s,a=[],n=e.newVal.length-1;0<=n;n--)a.push(r(e.newVal[n]));e.newVal.length>e.prevVal.length?(t=r((t=f(e.newVal,e.prevVal))[0]),l.addClass(t).setAttribute("data-classes",e.newVal),o&&o.addClass(t).setAttribute("data-classes",e.newVal)):(s=r((s=f(e.prevVal,e.newVal))[0]),l.removeClass(s).setAttribute("data-classes",e.newVal),o&&o.removeClass(s).setAttribute("data-classes",e.newVal))})}),d.after("shown",function(){}),d.on("send-requested",function(e){var t=e.currentTarget.getField("classname").getValue();if(t){for(var s=[],a=t.length-1;0<=a;a--)s.push(r(t[a]));new Y.Promise(function(s){var a={};Y.Data.get({url:"/api/config/GetInjectionSettings",success:function(e){var t;-1<e.footer.indexOf("customBlocksClasses")&&((t=document.createElement("div")).innerHTML=e.footer,a=JSON.parse(t.querySelector("#customBlocksClasses").textContent.replace("window.CustomBlocksClasses=",""))),C&&console.log(a),s(a)},failure:function(e){C&&console.log("Get Injections Data Failed"),new Y.Squarespace.Widgets.Information({"strings.title":"Error","strings.message":e.error}),s(a)}})}).then(function(t){var a,n;t[i]=s,a="window.CustomBlocksClasses="+JSON.stringify(t),n=l,new Y.Promise(function(s){Y.Data.get({url:"/api/config/GetInjectionSettings",success:function(e){var t;-1<e.footer.indexOf("customBlocksClasses")?((t=document.createElement("div")).innerHTML=e.footer,t.querySelector("#customBlocksClasses").textContent=a,e.footer=t.innerHTML):e.footer=e.footer+'\n<script id="customBlocksClasses">'+a+"<\/script>",Y.Data.post({url:"/api/config/SaveInjectionSettings",data:e,success:function(){C&&console.log("Classes synced"),Y.fire("custom-classes-sync",{taret:n}),s(!0)},failure:function(e){C&&console.log("Set Injections Data Failed"),s(!1)}})},failure:function(e){C&&console.log("Get Injections Data Failed"),s(!1),new Y.Squarespace.Widgets.Information({"strings.title":"Error","strings.message":e.error})}})}).then(function(e){e&&(d.close(),window.CustomBlocksClasses=t,window.top.CustomBlocksClasses=t,setTimeout(function(){d.destroy()},100))})})}else d.cancel(),d.destroy()}),d.anchorEl=l,d.after(["dismiss"],function(e){}),d.show()))}function n(e){e.document.body.addEventListener("click",a)}var d,c,g,e,m,p,w,h=[],C=!1;window.CustomBlocksClasses&&(window.top.CustomBlocksClasses=window.CustomBlocksClasses),window.Squarespace&&window.Squarespace.onInitialize&&window.Squarespace.onInitialize(Y,function(){l(window)}),document.addEventListener("DOMContentLoaded",function(){window.__initCustomBlocksClasses=l,window.addEventListener("template:blogList.load",function(){l(window)}),setTimeout(function(){l(window)},16)}),l(window),window.Squarespace&&window.Squarespace.onDestroy&&window.Squarespace.onDestroy(Y,function(){window.top.document.body.removeEventListener("click",a),window.document.body.removeEventListener("click",a)}),window.self!==window.top&&window.top.Static.SQUARESPACE_CONTEXT.authenticatedAccount&&(e=".dialog-classname-set .tag-field-wrapper{display:block}.dialog-classname-set .body-block {padding: 16px 0;}.dialog-classname-set .title{width:100%;font-size:14px;margin:0 0 10px 0}.dialog-classname-set .tag-field .category {font-size: 14px;padding:5px 25px!important}.dialog-classname-set .tag-field-container{white-space:normal}.dialog-classname-set .tag-field .category .x{position:absolute!important;right:6px;top:4px;font-size:16px}.dialog-classname-set .tag-field .tag:first-child:before,.dialog-classname-set .tag-field-container .dialog-element{background-size: 18px!important}",m="dialog-classname-set",(p=(p=window.top)||window).document.getElementById(m)||((w=p.document.createElement("style")).type="text/css",w.id=m,w.styleSheet?w.styleSheet.cssText=e:w.appendChild(p.document.createTextNode(e)),p.document.querySelectorAll("head")[0].appendChild(w)),t(),document.addEventListener("DOMContentLoaded",function(){var e;s(window),n(window),s(window.top),n(window.top),c||g||(e=function(){window.top.Y.Squarespace.DialogFields.SelectEditorClasses=window.top.Y.Base.create("selectEditor-classes",window.top.Y.Squarespace.DialogFields.SelectEditor,[],{_createNewMember:function(e){this._resetCreateInput("Creating"),this._createOptionWrapper.removeClass("add"),this._createOptionWrapper.addClass("active"),this._createNewMemberSuccess(e)},_createNewMemberSuccess:function(e){var t=this.get("options");-1<t.indexOf(e)||(this._toggleActiveMembersClass(e,!0),t.push(e),this.set("options",t),this.fire("addMember",{newVal:e}),this.fire("memberCreated",e),this._createInput.set("value",""),this.optionWrapEl.set("scrollTop",this.optionWrapEl.get("scrollHeight")))}},{}),window.top.Y.Squarespace.DialogFields.ClassesStringSet=window.top.Y.Base.create("stringset-field-classes",window.top.Y.Squarespace.DialogFields.Stringset,[],{_requestMemberData:function(e){t(this).then(window.top.Y.bind(e,this))},_getMemberEditorWidget:function(){var e=this.get("mode"),t=this.get("inputPlaceholder");switch(e){case"input":return new window.top.Y.Squarespace.DialogFields.InputEditor({name:"classEditor",allowOnlyExistingMembers:this.get("allowOnlyExistingMembers"),autoCompleteIndex:-1,data:this.get("data"),editorLabel:this.get("editorLabel"),placeholder:t,existingMembers:this.get("existingMembers"),memberClass:this.get("memberClass"),visible:!1});case"select":var s=new window.top.Y.Squarespace.DialogFields.SelectEditorClasses({name:"classEditor",addMemberText:this.get("addMemberText"),canAddMembers:this.get("canAddMembers"),collectionId:this.get("collectionId"),editorLabel:this.get("editorLabel"),data:this.get("data"),blurring:!1,width:336,maxLength:this.get("maxMemberChars"),memberClass:this.get("memberClass"),options:this.get("existingMembers")});return s.after("render",function(e){e.target._createInput.setAttribute("placeholder",t)}),s}}},{CSS_PREFIX:"stringset-field-classes"}),c=window.top.Y.Squarespace.EditingDialog,g=window.top.Y.Squarespace.DialogFields.ClassesStringSet},setTimeout(function(){window.top.Y&&window.top.Y.Squarespace?e():window.Squarespace&&window.Squarespace.onInitialize&&window.Squarespace.onInitialize(window.Y,function(){e()})},20))}))}();